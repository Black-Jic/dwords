import{b as W,h as S,k as q,c as m,a as z,p as h,q as E,A as F,I as H,D as k,l as Y,B as O,y as f,z as a,K as Z,v as K,W as X,_ as Q,P as ce,d as v,w as ee,aG as ue,m as de,M as te,aH as pe,r as N,o as ge,C as b,L as me,x as B,G as R,E as he,F as fe,J as ye,av as ve,e as V,X as se,a0 as _,Y as A,a1 as Ce,aI as Pe,aJ as be}from"./index.5abe1466.js";import{u as Se,i as we,g as U,m as Te,d as Be,T as ke,E as Ie,f as Le}from"./index.bb8f99ad.js";const Ne=W({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),De=["textContent"],Me=S({name:"ElBadge"}),$e=S({...Me,props:Ne,setup(e,{expose:s}){const t=e,n=q("badge"),o=m(()=>t.isDot?"":z(t.value)&&z(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`);return s({content:o}),(i,l)=>(h(),E("div",{class:f(a(n).b())},[F(i.$slots,"default"),H(X,{name:`${a(n).namespace.value}-zoom-in-center`,persisted:""},{default:k(()=>[Y(O("sup",{class:f([a(n).e("content"),a(n).em("content",i.type),a(n).is("fixed",!!i.$slots.default),a(n).is("dot",i.isDot)]),textContent:Z(a(o))},null,10,De),[[K,!i.hidden&&(a(o)||i.isDot)]])]),_:1},8,["name"])],2))}});var ze=Q($e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const Ee=ce(ze),x={},Oe=W({a11y:{type:Boolean,default:!0},locale:{type:v(Object)},size:Se,button:{type:v(Object)},experimentalFeatures:{type:v(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:v(Object)},zIndex:Number,namespace:{type:String,default:"el"}});S({name:"ElConfigProvider",props:Oe,setup(e,{slots:s}){ee(()=>e.message,n=>{Object.assign(x,n!=null?n:{})},{immediate:!0,deep:!0});const t=ue(e);return()=>F(s,"default",{config:t==null?void 0:t.value})}});const ne=["success","info","warning","error"],c=de({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:te?document.body:void 0}),_e=W({customClass:{type:String,default:c.customClass},center:{type:Boolean,default:c.center},dangerouslyUseHTMLString:{type:Boolean,default:c.dangerouslyUseHTMLString},duration:{type:Number,default:c.duration},icon:{type:we,default:c.icon},id:{type:String,default:c.id},message:{type:v([String,Object,Function]),default:c.message},onClose:{type:v(Function),required:!1},showClose:{type:Boolean,default:c.showClose},type:{type:String,values:ne,default:c.type},offset:{type:Number,default:c.offset},zIndex:{type:Number,default:c.zIndex},grouping:{type:Boolean,default:c.grouping},repeatNum:{type:Number,default:c.repeatNum}}),xe={destroy:()=>!0},p=pe([]),We=e=>{const s=p.findIndex(o=>o.id===e),t=p[s];let n;return s>0&&(n=p[s-1]),{current:t,prev:n}},Fe=e=>{const{prev:s}=We(e);return s?s.vm.exposed.bottom.value:0},He=["id"],Je=["innerHTML"],je=S({name:"ElMessage"}),Ge=S({...je,props:_e,emits:xe,setup(e,{expose:s}){const t=e,{Close:n}=ke,o=q("message"),i=N(),l=N(!1),u=N(0);let d;const g=m(()=>t.type?t.type==="error"?"danger":t.type:"info"),w=m(()=>{const r=t.type;return{[o.bm("icon",r)]:r&&U[r]}}),P=m(()=>t.icon||U[t.type]||""),ae=m(()=>Fe(t.id)),J=m(()=>t.offset+ae.value),ie=m(()=>u.value+J.value),re=m(()=>({top:`${J.value}px`,zIndex:t.zIndex}));function L(){t.duration!==0&&({stop:d}=ve(()=>{T()},t.duration))}function j(){d==null||d()}function T(){l.value=!1}function le({code:r}){r===Ie.esc&&T()}return ge(()=>{L(),l.value=!0}),ee(()=>t.repeatNum,()=>{j(),L()}),Te(document,"keydown",le),Be(i,()=>{u.value=i.value.getBoundingClientRect().height}),s({visible:l,bottom:ie,close:T}),(r,G)=>(h(),b(X,{name:a(o).b("fade"),onBeforeLeave:r.onClose,onAfterLeave:G[0]||(G[0]=at=>r.$emit("destroy")),persisted:""},{default:k(()=>[Y(O("div",{id:r.id,ref_key:"messageRef",ref:i,class:f([a(o).b(),{[a(o).m(r.type)]:r.type&&!r.icon},a(o).is("center",r.center),a(o).is("closable",r.showClose),r.customClass]),style:me(a(re)),role:"alert",onMouseenter:j,onMouseleave:L},[r.repeatNum>1?(h(),b(a(Ee),{key:0,value:r.repeatNum,type:a(g),class:f(a(o).e("badge"))},null,8,["value","type","class"])):B("v-if",!0),a(P)?(h(),b(a(R),{key:1,class:f([a(o).e("icon"),a(w)])},{default:k(()=>[(h(),b(he(a(P))))]),_:1},8,["class"])):B("v-if",!0),F(r.$slots,"default",{},()=>[r.dangerouslyUseHTMLString?(h(),E(fe,{key:1},[B(" Caution here, message could've been compromised, never use user's input as message "),O("p",{class:f(a(o).e("content")),innerHTML:r.message},null,10,Je)],2112)):(h(),E("p",{key:0,class:f(a(o).e("content"))},Z(r.message),3))]),r.showClose?(h(),b(a(R),{key:2,class:f(a(o).e("closeBtn")),onClick:ye(T,["stop"])},{default:k(()=>[H(a(n))]),_:1},8,["class","onClick"])):B("v-if",!0)],46,He),[[K,l.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Re=Q(Ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let Ve=1;const oe=e=>{const s=!e||V(e)||se(e)||_(e)?{message:e}:e,t={...c,...s};if(!t.appendTo)t.appendTo=document.body;else if(V(t.appendTo)){let n=document.querySelector(t.appendTo);Ce(n)||(n=document.body),t.appendTo=n}return t},Ae=e=>{const s=p.indexOf(e);if(s===-1)return;p.splice(s,1);const{handler:t}=e;t.close()},Ue=({appendTo:e,...s},t)=>{const{nextZIndex:n}=Le(),o=`message_${Ve++}`,i=s.onClose,l=document.createElement("div"),u={...s,zIndex:n()+s.zIndex,id:o,onClose:()=>{i==null||i(),Ae(P)},onDestroy:()=>{A(null,l)}},d=H(Re,u,_(u.message)||se(u.message)?{default:_(u.message)?u.message:()=>u.message}:null);d.appContext=t||C._context,A(d,l),e.appendChild(l.firstElementChild);const g=d.component,P={id:o,vnode:d,vm:g,handler:{close:()=>{g.exposed.visible.value=!1}},props:d.component.props};return P},C=(e={},s)=>{if(!te)return{close:()=>{}};if(z(x.max)&&p.length>=x.max)return{close:()=>{}};const t=oe(e);if(t.grouping&&p.length){const o=p.find(({vnode:i})=>{var l;return((l=i.props)==null?void 0:l.message)===t.message});if(o)return o.props.repeatNum+=1,o.props.type=t.type,o.handler}const n=Ue(t,s);return p.push(n),n.handler};ne.forEach(e=>{C[e]=(s={},t)=>{const n=oe(s);return C({...n,type:e},t)}});function qe(e){for(const s of p)(!e||e===s.props.type)&&s.handler.close()}C.closeAll=qe;C._context=null;const Ye=Pe(C,"$message");function I(){var e=new Date,s=e.getFullYear(),t=e.getMonth()+1;t=t<10?"0"+t:t;var n=e.getDate();n=n<10?"0"+n:n;var o=e.getHours();o=o<10?"0"+o:o;var i=e.getMinutes();return i=i<10?"0"+i:i,e.getSeconds(),`${s}-${t}-${n} ${o}:${i}`}function Ze(){function e(s,t="success"){Ye({showClose:!0,message:s,type:t})}return{showMsg:e}}function D(e){return JSON.stringify(e)}function M(e){return JSON.parse(e)}class Ke{constructor(s,t,n=[],o=new Xe){this.id=s,this.time=t,this.content=n,this.comment=o}}class Xe{constructor(s=0,t="never"){this.reviewTimes=s,this.lastTime=t}}class Qe{constructor(s,t=[],n={}){this.time=s,this.content=t,this.comment=n}}class et{constructor(s,t=0,n={}){this.word=s,this.star=t,this.comment=n}}const{showMsg:y}=Ze(),tt="DWords_",$=()=>{const e=tt+Date.now(),s=I();return new Ke(e,s)},st=be("word",{state:()=>({pageList:[],thisPage:{},thisBook:{}}),getters:{},actions:{addWord(e){if(e==="")return y("\u5355\u8BCD\u4E0D\u53EF\u4E3A\u7A7A!","warning");const s=new et(e),t=this.thisPage.content.length-1;this.thisPage.content[t].content.push(s)},updateWord(e,s,t){this.thisPage.content[s].content[t].word!==e&&(this.thisPage.content[s].content[t].word=e,y("\u4FEE\u6539\u6210\u529F~"))},starWord(e,s){const t=this.thisPage.content[e].content[s].star;this.thisPage.content[e].content[s].star=t?0:1,y(t?"\u53D6\u6D88\u6536\u85CF~":"\u5DF2\u6536\u85CF~")},delWord(e,s){this.thisPage.content[e].content.splice(s,1),y("\u5DF2\u5220\u9664~")},addGroup(){const e=new Qe(I());this.thisPage.content.push(e)},delGroup(e){this.thisPage.content.splice(e,1)},addPage(){const e=$();this.pageList.push(e.id),this.thisPage=e,y("\u65B0\u5EFA\u9875\u9762~")},changePage(e){const s=this.pageList[e];this.thisPage=JSON.parse(localStorage.getItem(s))},delPage(e){const s=this.pageList[e];localStorage.removeItem(s),this.pageList.splice(e,1),console.log("delPage",this.pageList)},completeReview(){this.thisPage.comment.lastTime=I(),this.thisPage.comment.reviewTimes++,this.syncWordData()},getDirInfo(e,s){const t=e*s,n=t+s,o=Math.ceil(this.pageList.length/s);let i=[],l={},u={},d=0;for(let g=t;g<n&&g<this.pageList.length;g++)l=JSON.parse(localStorage.getItem(this.pageList[g])),l.content.forEach(w=>{d+=w.content.length}),u={time:l.time,sumWord:d},i.push(u),d=0,u={};return{sumPage:o,index:e,dirInfo:i}},initWordData(){const e=M(localStorage.getItem("pageList_"+this.thisBook.id));if(e){const s=e[e.length-1],t=M(localStorage.getItem(s)),n=I().slice(0,10),o=t.time.slice(0,10);n===o?this.thisPage=t:(this.thisPage=$(),e.push(this.thisPage.id)),this.pageList=e}else{const s=$();this.pageList=[s.id],this.thisPage=s}console.log("wordStore inited")},changeThisBook(e){Object.assign(this.thisBook,e),localStorage.setItem("thisBook",D(e))},initThisBook(){const e=M(localStorage.getItem("thisBook"));e&&this.changeThisBook(e)},syncWordData(){localStorage.setItem("pageList_"+this.thisBook.id,D(this.pageList)),localStorage.setItem(this.thisPage.id,D(this.thisPage))}}}),nt=st(),{initWordData:lt,initThisBook:ot}=nt;ot();export{Ze as a,I as g,M as p,D as t,st as u};
